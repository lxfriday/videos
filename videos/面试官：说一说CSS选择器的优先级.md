# 面试官：说一说CSS选择器的优先级

- [前往视频](https://www.bilibili.com/video/BV1Me411K7kQ)

1
00:00:00,100 --> 00:00:02,133
关于CSS选择器的优先级

2
00:00:02,133 --> 00:00:03,966
你们有做过比较详细的了解吗

3
00:00:03,966 --> 00:00:06,299
除了像important打遍天下无敌手

4
00:00:06,300 --> 00:00:08,900
id选择器比class选择器优先级更高

5
00:00:08,966 --> 00:00:11,299
其它的选择器的优先级是怎样呢

6
00:00:11,300 --> 00:00:13,166
实际上CSS选择器的优先级

7
00:00:13,166 --> 00:00:14,266
还是有一定难度的

8
00:00:14,266 --> 00:00:16,066
这个问题在前端面试里面

9
00:00:16,066 --> 00:00:17,399
算是一个中高难度的问题

10
00:00:17,400 --> 00:00:18,466
那我们来一起看一看

11
00:00:18,466 --> 00:00:20,366
它有哪些你可能不知道的地方吧

12
00:00:20,366 --> 00:00:21,899
嗯这里先纠正一下

13
00:00:21,900 --> 00:00:24,133
说选择器的优先级可能不是太准确

14
00:00:24,133 --> 00:00:26,733
因为important和内联样式并不属于选择器

15
00:00:26,733 --> 00:00:27,966
不过也没有比较好的描述

16
00:00:27,966 --> 00:00:30,366
来表示这些优先级的差异啊所以

17
00:00:30,366 --> 00:00:33,099
咱们还是统称为CSS选择器优先级啊

18
00:00:33,833 --> 00:00:35,599
!important相信就不用多说了

19
00:00:35,600 --> 00:00:36,700
它是一个非常有效

20
00:00:36,700 --> 00:00:38,366
同时又是一个非常恶心的配置

21
00:00:38,366 --> 00:00:39,266
因为通常情况下

22
00:00:39,266 --> 00:00:41,266
你只要给某个属性加上了 !important

23
00:00:41,300 --> 00:00:42,700
基本上就可以覆盖掉其它

24
00:00:42,700 --> 00:00:44,500
CSS选择器对这个属性的配置

25
00:00:44,500 --> 00:00:46,933
但是如果你的CSS代码中有很多 !important

26
00:00:47,066 --> 00:00:47,699
你就会发现

27
00:00:47,700 --> 00:00:49,566
项目中写CSS的时候会非常难受

28
00:00:49,566 --> 00:00:50,666
有这么一种情况啊

29
00:00:50,666 --> 00:00:52,199
如果有人在内联样式里面

30
00:00:52,200 --> 00:00:53,600
给属性添加了 !important

31
00:00:53,700 --> 00:00:56,333
那你可能就有问候xxx

32
00:00:56,400 --> 00:00:58,133
这如果是别人封装的一个组件

33
00:00:58,133 --> 00:01:00,399
老板说让你把这个棕色改成绿色

34
00:01:00,400 --> 00:01:02,066
那你仅仅使用CSS的话

35
00:01:02,066 --> 00:01:03,166
是根本没办法改变

36
00:01:03,166 --> 00:01:04,499
组件里面的这个棕色的

37
00:01:04,500 --> 00:01:06,366
你只能使用JS拿到这个元素

38
00:01:06,366 --> 00:01:07,899
然后强行更改它的颜色

39
00:01:07,966 --> 00:01:10,533
因为 !important 的优先级甚至会高于内联样式啊

40
00:01:10,533 --> 00:01:11,766
所以它的优先级是最高的

41
00:01:11,766 --> 00:01:13,466
除了!important这个特例之外

42
00:01:13,466 --> 00:01:15,199
其它所有选择器包括内联样式

43
00:01:15,200 --> 00:01:16,800
它的优先级都遵循一个规则

44
00:01:16,800 --> 00:01:19,100
越能够准确表示某个元素的选择器

45
00:01:19,100 --> 00:01:20,200
它的优先级就越高

46
00:01:20,200 --> 00:01:21,666
相同优先级的选择器

47
00:01:21,800 --> 00:01:23,066
浏览器会优先选择靠后声明的

48
00:01:23,066 --> 00:01:24,566
选择器中配置的属性

49
00:01:24,566 --> 00:01:26,733
比如说优先级排在第二的内联样式

50
00:01:26,733 --> 00:01:28,366
它被直接写在了标签上面

51
00:01:28,366 --> 00:01:30,166
是离标签最近的CSS样式

52
00:01:30,166 --> 00:01:30,399
所以

53
00:01:30,400 --> 00:01:32,933
即使你声明了class选择器和id选择器

54
00:01:32,933 --> 00:01:33,966
最终background-color

55
00:01:33,966 --> 00:01:35,533
还是会应用内联样式中的配置

56
00:01:35,533 --> 00:01:37,599
接下来我们看看常见选择器的优先级

57
00:01:38,466 --> 00:01:40,933
在你刚接触HTML和CSS的时候

58
00:01:41,000 --> 00:01:41,933
肯定就有人跟你说过

59
00:01:41,933 --> 00:01:43,533
不要重复声明id选择器

60
00:01:43,533 --> 00:01:44,599
这是因为在规范上

61
00:01:44,600 --> 00:01:46,066
我们常把一个id选择器

62
00:01:46,066 --> 00:01:47,133
对应到一个元素

63
00:01:47,133 --> 00:01:48,733
所以id选择器的优先级比

64
00:01:48,733 --> 00:01:49,999
class选择器优先级要高

65
00:01:50,000 --> 00:01:50,400
即使

66
00:01:50,400 --> 00:01:52,566
class选择器放在了id选择器的后面

67
00:01:52,566 --> 00:01:53,466
页面显示的时候

68
00:01:53,466 --> 00:01:55,799
依然使用的是id选择器中对应的黄色

69
00:01:55,800 --> 00:01:57,666
那除了前面说到的3种优先级

70
00:01:57,666 --> 00:01:59,166
这4种选择器优先级

71
00:01:59,166 --> 00:02:00,766
你们知道顺序是怎样的吗

72
00:02:00,766 --> 00:02:01,366
元素选择器

73
00:02:01,366 --> 00:02:02,399
就是我们常在页面上面

74
00:02:02,400 --> 00:02:03,800
看到的HTML标签

75
00:02:03,800 --> 00:02:05,066
比如div标签

76
00:02:05,066 --> 00:02:06,366
p标签span标签

77
00:02:06,400 --> 00:02:07,900
它可以应用到页面上任何

78
00:02:07,900 --> 00:02:09,500
与之相匹配的标签上面

79
00:02:09,500 --> 00:02:09,733
所以

80
00:02:09,733 --> 00:02:11,499
元素选择器是这几个选择器里面

81
00:02:11,500 --> 00:02:12,333
优先级最低的

82
00:02:12,333 --> 00:02:13,533
关于伪类选择器

83
00:02:13,533 --> 00:02:13,733
这里

84
00:02:13,733 --> 00:02:15,766
会涉及到另一个经常会被问到的问题

85
00:02:15,766 --> 00:02:18,766
那就是:link :visited :hover :active的放置顺序

86
00:02:18,766 --> 00:02:21,266
这4个伪类的放置顺序就是lvha

87
00:02:22,300 --> 00:02:24,866
这里设置的:link伪类中的颜色是红色

88
00:02:24,866 --> 00:02:27,099
而class选择器中的颜色是黑色

89
00:02:27,100 --> 00:02:28,733
页面上最终显示出来的颜色

90
00:02:28,733 --> 00:02:29,666
效果是红色

91
00:02:29,666 --> 00:02:30,566
所以很明显

92
00:02:30,600 --> 00:02:32,766
伪类的优先级比class选择器的优先级更高

93
00:02:32,766 --> 00:02:34,399
这4个伪类选择器

94
00:02:34,400 --> 00:02:36,400
必须按照lvha的顺序放置

95
00:02:36,400 --> 00:02:37,933
否则逻辑会出现问题

96
00:02:39,800 --> 00:02:41,300
那属性选择器的优先级

97
00:02:41,300 --> 00:02:42,200
又处在什么位置呢

98
00:02:42,200 --> 00:02:43,800
实际上属性选择器的优先级

99
00:02:43,800 --> 00:02:45,100
比伪类选择器要低

100
00:02:45,100 --> 00:02:47,100
而class选择器的优先级则和

101
00:02:47,100 --> 00:02:48,700
属性选择器的优先级相同

102
00:02:48,700 --> 00:02:49,700
在这个例子中

103
00:02:49,700 --> 00:02:51,900
属性选择器中定义的颜色是绿色

104
00:02:51,900 --> 00:02:54,333
而伪类选择器中定义的颜色是红色

105
00:02:54,333 --> 00:02:56,399
最终a标签的颜色是红色

106
00:02:56,400 --> 00:02:59,433
所以伪类选择器优先级比属性选择器优先级更高

107
00:02:59,466 --> 00:03:01,899
那属性选择器和class选择器优先级相同

108
00:03:01,933 --> 00:03:02,933
是怎么测出来的呢

109
00:03:02,933 --> 00:03:03,966
视频前面说过

110
00:03:03,966 --> 00:03:05,399
相同优先级的选择器

111
00:03:05,566 --> 00:03:07,866
浏览器会选择使用更靠后的选择器中

112
00:03:07,866 --> 00:03:08,566
配置的属性

113
00:03:08,600 --> 00:03:11,266
让p1这个class选择器放在属性选择器的前面

114
00:03:11,266 --> 00:03:13,166
而p2放在属性选择器的后面

115
00:03:13,166 --> 00:03:14,733
那根据优先级规则呢

116
00:03:14,733 --> 00:03:17,266
p1就会应用蓝色而p2会应用绿色

117
00:03:17,266 --> 00:03:18,699
根据前面做出的对比呢

118
00:03:18,700 --> 00:03:21,066
我们就可以得出这样的选择器优先级顺序

119
00:03:27,933 --> 00:03:29,099
我们回到视频开头

120
00:03:29,100 --> 00:03:30,533
给出的这个经典面试题

121
00:03:30,533 --> 00:03:31,466
两个div中

122
00:03:31,466 --> 00:03:33,499
都有blue和red这两个class选择器

123
00:03:33,500 --> 00:03:35,200
只不过它们放置的顺序是反的

124
00:03:35,200 --> 00:03:36,700
但是这并不影响优先级

125
00:03:36,700 --> 00:03:38,300
而CSS选择器定义的时候

126
00:03:38,300 --> 00:03:39,666
red是放在blue后面的

127
00:03:39,666 --> 00:03:39,966
所以

128
00:03:39,966 --> 00:03:42,799
最终两个div中的文字颜色都是红色

129
00:03:42,900 --> 00:03:45,333
最开始你看到这个题目的时候可能会犹豫好久

130
00:03:45,333 --> 00:03:46,566
但是当你想明白之后

131
00:03:46,566 --> 00:03:48,399
这个问题实际上是非常简单的

132
00:03:48,400 --> 00:03:49,566
最后再提一个点

133
00:03:49,566 --> 00:03:51,866
前面说的都是单一选择器的优先级

134
00:03:52,166 --> 00:03:54,899
实际上还存在一个CSS选择器权重的概念

135
00:03:54,966 --> 00:03:55,999
这个权重的概念

136
00:03:56,000 --> 00:03:57,866
和前面说的CSS选择器的优先级

137
00:03:57,866 --> 00:03:58,699
是基本匹配的

138
00:03:58,700 --> 00:04:00,366
我们用一个例子来看一看权重

139
00:04:00,366 --> 00:04:02,266
这里设置了两条CSS规则

140
00:04:02,266 --> 00:04:04,166
p1和p2都是class选择器

141
00:04:04,200 --> 00:04:05,466
第一条CSS规则呢

142
00:04:05,466 --> 00:04:07,733
是把p1和p2放在一起定义的规则

143
00:04:07,733 --> 00:04:10,166
而第二条规则是单独对p1定义的规则

144
00:04:10,166 --> 00:04:13,099
那页面最终显示的文字颜色是什么呢

145
00:04:13,166 --> 00:04:14,099
是绿色

146
00:04:15,200 --> 00:04:16,966
因为两个class选择器的权重

147
00:04:16,966 --> 00:04:17,666
肯定是大于

148
00:04:17,666 --> 00:04:19,299
一个class选择器权重的

149
00:04:19,500 --> 00:04:21,400
好了本期视频到这里就结束了

150
00:04:21,466 --> 00:04:23,099
感谢你们的观看拜拜

