# 面试官：你知道BFC吗？

- [前往视频](https://www.bilibili.com/video/BV1Bd4y1e7od)

1
00:00:00,066 --> 00:00:01,166
不知道大家对BFC

2
00:00:01,166 --> 00:00:02,666
也就是块级格式化上下文

3
00:00:02,666 --> 00:00:03,466
有多少了解啊

4
00:00:03,466 --> 00:00:04,199
这个BFC呢

5
00:00:04,200 --> 00:00:06,166
是CSS里面一个非常有趣的东西

6
00:00:06,166 --> 00:00:07,966
当然BFC也是前端面试里面

7
00:00:07,966 --> 00:00:09,066
非常高频的问题

8
00:00:09,066 --> 00:00:10,266
面试官可能会问你

9
00:00:10,266 --> 00:00:12,499
高度坍塌和外边距折叠怎么处理

10
00:00:12,500 --> 00:00:13,600
它的实际意思就是

11
00:00:13,600 --> 00:00:15,500
你跟我说一下BFC是什么东西

12
00:00:15,600 --> 00:00:16,800
举一个比较常见的例子

13
00:00:16,800 --> 00:00:17,400
这段代码中

14
00:00:17,400 --> 00:00:19,300
蓝色的盒子被设置成了左浮动

15
00:00:19,300 --> 00:00:20,933
但是页面上面显示的效果

16
00:00:20,933 --> 00:00:22,666
和我们想象的可能不太一样

17
00:00:22,666 --> 00:00:24,399
父级盒子的颜色是红色

18
00:00:24,400 --> 00:00:25,366
正常情况下

19
00:00:25,366 --> 00:00:27,166
父级盒子应该会把所有的子级盒子

20
00:00:27,200 --> 00:00:28,166
全部包括在内

21
00:00:28,166 --> 00:00:30,366
我们理想中它应该是下面这种效果

22
00:00:30,366 --> 00:00:32,699
这就是面试官的问题之一高度坍塌

23
00:00:32,700 --> 00:00:34,766
要解决高度坍塌其实非常简单啊

24
00:00:34,900 --> 00:00:37,366
只需要对父级盒子添加一个overflow：auto

25
00:00:37,366 --> 00:00:39,466
负极盒子就自然能够支棱起来了

26
00:00:39,466 --> 00:00:40,899
添加了overflow：auto之后

27
00:00:40,900 --> 00:00:43,300
就对父级盒子wrapper创建了一个BFC

28
00:00:43,300 --> 00:00:44,900
而对创建了BFC的盒子

29
00:00:44,900 --> 00:00:46,066
在计算高度的时候

30
00:00:46,066 --> 00:00:48,133
会把浮动元素的高度也计算进去

31
00:00:48,266 --> 00:00:50,399
兄弟们下次碰到面试官问这个问题

32
00:00:50,400 --> 00:00:51,600
知道该怎么问候回去了吧

33
00:00:51,600 --> 00:00:51,900
接下来

34
00:00:51,900 --> 00:00:54,100
我们详细说一说BFC以及其应用啊

35
00:00:54,100 --> 00:00:55,400
BFC翻译成中文呢

36
00:00:55,400 --> 00:00:56,900
叫块级格式化上下文

37
00:00:56,900 --> 00:00:58,333
也叫块格式化上下文

38
00:00:58,333 --> 00:00:59,099
跟它相关的呢

39
00:00:59,100 --> 00:01:00,600
还有一个行内格式化上下文

40
00:01:00,600 --> 00:01:02,866
不过这个行内格式化上下文没什么好说的

41
00:01:02,866 --> 00:01:04,266
BFC经常会被问到呢

42
00:01:04,266 --> 00:01:06,133
是因为创建了BFC的元素

43
00:01:06,133 --> 00:01:07,299
有一些特性存在

44
00:01:07,366 --> 00:01:08,433
通常会使用这些特性

45
00:01:08,433 --> 00:01:09,866
来处理页面上面的一些

46
00:01:09,866 --> 00:01:10,699
异常问题

47
00:01:11,900 --> 00:01:13,333
最顶层的HTML

48
00:01:13,333 --> 00:01:14,866
就是一个创建了BFC的元素

49
00:01:14,866 --> 00:01:15,966
不过我们做开发的时候

50
00:01:15,966 --> 00:01:18,099
对这个根元素可能并不是很在意啊

51
00:01:18,200 --> 00:01:19,133
除了这个根元素

52
00:01:19,133 --> 00:01:20,466
还有一些使用CSS属性

53
00:01:20,466 --> 00:01:21,866
来创建BFC的方法

54
00:01:21,866 --> 00:01:23,333
主要是分为4个大类

55
00:01:23,366 --> 00:01:24,999
设置float为left或者right

56
00:01:25,000 --> 00:01:27,200
也就是让元素左浮动或者是右浮动

57
00:01:27,200 --> 00:01:29,266
也可以设置position属性为absolute

58
00:01:29,266 --> 00:01:30,199
或者是fixed

59
00:01:30,400 --> 00:01:32,666
实际上使用float或者是position创建BFC

60
00:01:32,666 --> 00:01:33,733
我们能明显感知到

61
00:01:33,733 --> 00:01:35,599
一个元素脱离正常的文档流之后

62
00:01:35,600 --> 00:01:36,766
就会创建一个BFC

63
00:01:36,766 --> 00:01:37,866
但是使用float和position

64
00:01:38,200 --> 00:01:40,366
强制创建BFC的话也会有一些问题

65
00:01:40,466 --> 00:01:41,599
因为使用这两个属性之后

66
00:01:41,600 --> 00:01:44,166
我们对元素做布局的时候会比较麻烦

67
00:01:44,166 --> 00:01:46,533
而使用display和overflow创建BFC

68
00:01:46,533 --> 00:01:47,966
它们的副作用会比较小

69
00:01:47,966 --> 00:01:49,966
设置display为flow-root的时候

70
00:01:49,966 --> 00:01:51,866
它除了会给元素创建一个BFC

71
00:01:51,866 --> 00:01:53,366
不会带来任何其他的副作用

72
00:01:53,366 --> 00:01:54,333
所以使用display

73
00:01:54,333 --> 00:01:56,566
flow-root创建BFC是一个很好的选择

74
00:01:56,633 --> 00:01:58,899
当然了你也可以设置display为这几个属性

75
00:01:58,900 --> 00:01:59,366
也就是说

76
00:01:59,366 --> 00:02:00,566
当我们使用flex布局

77
00:02:00,566 --> 00:02:01,966
或者是grid布局的时候

78
00:02:01,966 --> 00:02:03,999
实际上就已经创建了一个BFC

79
00:02:04,133 --> 00:02:05,966
这个地方也有一个要注意的点

80
00:02:05,966 --> 00:02:07,566
inline-block可以创建一个BFC

81
00:02:07,566 --> 00:02:09,599
但是block是不能够创建BFC的

82
00:02:09,600 --> 00:02:11,500
最后呢overflow也可以创建BFC

83
00:02:11,500 --> 00:02:13,066
只要它的值不是visible

84
00:02:13,300 --> 00:02:14,833
通常的话使用overflow auto

85
00:02:14,900 --> 00:02:16,300
创建BFC是比较合适的

86
00:02:16,300 --> 00:02:18,700
好了兄弟们说这些东西可能非常枯燥

87
00:02:18,700 --> 00:02:20,100
我们来看一看一些例子

88
00:02:21,233 --> 00:02:22,166
回到视频前面

89
00:02:22,166 --> 00:02:23,333
这个高度坍塌的问题

90
00:02:23,333 --> 00:02:24,566
b f c的其中一个特性

91
00:02:24,566 --> 00:02:25,099
就是

92
00:02:25,100 --> 00:02:27,400
设置了BFC的元素是一个独立的容器

93
00:02:27,400 --> 00:02:29,133
子元素不会超出这个容器

94
00:02:29,133 --> 00:02:30,733
因为这个wrapper并没有设置高度

95
00:02:30,733 --> 00:02:32,899
所以它的高度是由子元素撑起来的

96
00:02:32,900 --> 00:02:33,966
它的特性第四条就是

97
00:02:33,966 --> 00:02:35,799
BFC计算高度的时候

98
00:02:35,800 --> 00:02:37,766
会把浮动元素的高度也计算进来

99
00:02:37,966 --> 00:02:38,533
简而言之呢

100
00:02:38,533 --> 00:02:40,766
对wrapper这个容器创建了BFC之后

101
00:02:40,766 --> 00:02:42,966
高度坍塌这个问题就不会再出现了

102
00:02:43,066 --> 00:02:44,866
这个地方创建BFC的最优解呢

103
00:02:44,866 --> 00:02:47,699
就是使用display flow-root或者是overflow auto

104
00:02:47,800 --> 00:02:48,700
而inline-block

105
00:02:48,700 --> 00:02:51,133
或者是flex也可以消除高度坍塌

106
00:02:51,133 --> 00:02:53,466
但是这两个值都带有自己的副作用

107
00:02:55,466 --> 00:02:56,533
不知道你们有没有发现啊

108
00:02:56,533 --> 00:02:57,266
这个例子里面

109
00:02:57,266 --> 00:02:58,699
实际上还有另外一个问题

110
00:02:58,733 --> 00:03:01,333
paragraph这个div的宽度是200 PX

111
00:03:01,333 --> 00:03:03,699
但是我们眼睛看的时候它是只有100 PX

112
00:03:03,700 --> 00:03:05,766
和floatBox宽度是一样的

113
00:03:05,966 --> 00:03:06,766
实际上这个div

114
00:03:06,766 --> 00:03:08,866
有一半被floatBox给挡住了

115
00:03:08,866 --> 00:03:10,366
那如果不想它被挡住呢

116
00:03:10,366 --> 00:03:11,933
也可以使用BFC来解决

117
00:03:11,933 --> 00:03:13,466
BFC的其中一个特性就是

118
00:03:13,466 --> 00:03:15,766
浮动盒区域不会叠加到BFC上面

119
00:03:15,866 --> 00:03:18,333
那给paragraph创建BFC不就解决问题了吗

120
00:03:18,333 --> 00:03:20,066
添加display flow-root 之后

121
00:03:20,066 --> 00:03:22,199
paragraph这个div就不会被挡住了

122
00:03:22,200 --> 00:03:24,066
实际上如果我们了解BFC之后

123
00:03:24,066 --> 00:03:25,499
页面上好多奇怪的问题

124
00:03:25,533 --> 00:03:27,466
只需要通过添加一两个属性就解决了

125
00:03:27,466 --> 00:03:28,866
是不是还挺有趣的

126
00:03:30,166 --> 00:03:30,899
我们来看一看

127
00:03:30,900 --> 00:03:33,133
兄弟元素之间外边距折叠是什么样子

128
00:03:33,133 --> 00:03:34,099
这五个box

129
00:03:34,100 --> 00:03:37,133
它们的上外边距和下外边距都是10 PX

130
00:03:37,133 --> 00:03:38,499
那在我们的理想情况下

131
00:03:38,500 --> 00:03:40,800
box之间的距离应该是20 PX

132
00:03:40,800 --> 00:03:43,366
实际情况是它们之间的距离只有10 PX

133
00:03:43,366 --> 00:03:45,799
这些box之间的外边距发生了折叠

134
00:03:47,533 --> 00:03:48,466
像这种外边距折叠

135
00:03:48,466 --> 00:03:50,266
可以说是完全由人为造成的

136
00:03:50,266 --> 00:03:53,066
因为我们可以只设置margin-top为20 p x

137
00:03:54,800 --> 00:03:56,166
那如果是想应用BFC

138
00:03:56,166 --> 00:03:57,299
要怎么处理这个问题呢

139
00:03:57,300 --> 00:03:59,100
单纯的给box创建BFC

140
00:03:59,100 --> 00:04:00,166
是不能够解决问题的

141
00:04:00,166 --> 00:04:01,266
这里我了解到的办法

142
00:04:01,266 --> 00:04:02,533
就是在兄弟元素之间

143
00:04:02,533 --> 00:04:04,099
添加创建了BFC的元素

144
00:04:04,100 --> 00:04:04,566
很明显

145
00:04:04,566 --> 00:04:06,899
前两个兄弟元素之间的距离都是20 PX

146
00:04:06,900 --> 00:04:07,666
而后面几个

147
00:04:07,666 --> 00:04:09,466
兄弟元素之间的距离是10 PX

148
00:04:09,533 --> 00:04:11,333
添加创建了BFC的元素之后

149
00:04:11,366 --> 00:04:12,899
这些兄弟元素之间的外边距

150
00:04:12,900 --> 00:04:14,533
就不会越过BFC元素

151
00:04:14,533 --> 00:04:16,933
所以就能让外边距正常地显示出来了

152
00:04:17,200 --> 00:04:18,866
除了这种外边距折叠的情况

153
00:04:18,866 --> 00:04:20,966
还存在一种外边距合并的情况

154
00:04:20,966 --> 00:04:21,766
这个例子里面

155
00:04:21,766 --> 00:04:24,099
子元素的上外边距有100 PX

156
00:04:24,100 --> 00:04:25,966
而父元素设置的是10 PX

157
00:04:25,966 --> 00:04:27,466
最终页面上显示的时候

158
00:04:27,466 --> 00:04:29,566
父元素距离顶部有100 PX

159
00:04:29,566 --> 00:04:31,599
那处理这种情况的办法呢就比较多了

160
00:04:31,600 --> 00:04:33,733
复元素可以通过添加边框内边距

161
00:04:33,733 --> 00:04:34,533
或者是创建BFC

162
00:04:34,533 --> 00:04:35,999
来解决这个问题

163
00:04:36,166 --> 00:04:37,133
比较万金油的办法呢

164
00:04:37,133 --> 00:04:38,599
还是添加display flow-root

165
00:04:38,600 --> 00:04:39,633
或者是overflow auto

166
00:04:39,633 --> 00:04:40,933
创建了BFC之后

167
00:04:40,933 --> 00:04:42,933
子元素就不会干扰到父元素外面了

168
00:04:42,933 --> 00:04:44,966
也可以添加1px的透明边框

169
00:04:44,966 --> 00:04:46,499
或者是1px的内边距

170
00:04:46,500 --> 00:04:48,000
好了本期视频到这里就结束了

171
00:04:48,000 --> 00:04:49,500
感谢你们的观看拜拜

